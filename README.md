![Logo](doc/streamblocks-logo.png)

StreamBlocks Tycho Compiler  Repository
=======================================

Welcome to the StreamBlocks-Tycho compiler repository. This repository contains the frontend of the StreamBlocks dataflow compiler.

This README file is organized as follows:
1. Getting started
2. How to download this repository
3. Dependencies
4. Installation
5. StreamBlocks Platforms
6. Original Tycho repository
7. Support


### 1. Getting Started

StreamBlocks-Tycho is a compiler for dataflow programs that supports most of Cal, RVC-CAL and a language for Kahn processes.
This repository contains the frontend and the compiler infrastructure of the StreamBlocks-Tycho dataflow compiler and an example 
backend for C code generation.


### 2. How to download this repository

To get a local copy of the StreamBlocks-Tycho repository, clone this repository to the local system with the following commmand:
```
git clone https://github.com/streamblocks/streamblocks-tycho streamblocks-tycho
```

### 3. Dependencies

To build Tycho, you need the following:

* Java SE Development Kit 8 (or later)
* Apache Maven
* Git

### 4. Installation

StreamBlocks Tycho is installed using the following commands:
```
git clone https://github.com/streamblocks/streamblocks-tycho streamblocks-tycho
cd streamblocks-tycho
mvn -DskipTests install
```

### 5. Usage
After installation, StreamBlocks Tycho can be used as
```
tychoc --source-path <path to directory containing source files> --target-path <path to directory for target files> <entities like actor names>
```
#### Example
##### Compilation
Consider the following example. The following actor reads two streams of numbers and produces a stream that is the pairwise sum of two incoming streams.
```
actor Add () uint(size=8) X, uint(size=8) Y ==> uint(size=8) Z :
    action X:[x], Y:[y] ==> Z:[x + y] end
end
```
The above snippet is saved to the file ```source/arith.cal```, then, to compile:
```
tychoc --source-path source --target-path target Add
```
##### Usage of compilation output
The C code generated by the Tycho compiler can be compiled to an executable by
```
cc target/*.c -o Add
```
Given two input files ```in-1``` and ```in-2``` the pairwise sum of their byte streams using the ```Add``` actor in file named ```out``` by running:
```
./Add in-1 in-2 out
```

### 6. StreamBlocks Platforms
The StreamBlocks dataflow compiler has a code generator for multicore platforms and another one for reconfigurable computing using High-Level synthesis.
The repository for those code-generators are located at the following link : [streamblocks-platforms](https://github.com/streamblocks/streamblocks-platforms/blob/master/README.md).

### 7. Original Tycho dataflow compiler repository

Tycho dataflow compiler compiler was developed by Lund University and the original repository is located [here](https://bitbucket.org/dataflow/dataflow/).

### 8. Support

If you have an issue with StreamBlocks-Tycho dataflow compiler please create a new issue in this repository.
